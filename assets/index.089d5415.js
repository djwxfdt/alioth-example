var b=Object.defineProperty,f=Object.defineProperties;var p=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable;var m=(t,e,a)=>e in t?b(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,n=(t,e)=>{for(var a in e||(e={}))R.call(e,a)&&m(t,a,e[a]);if(h)for(var a of h(e))y.call(e,a)&&m(t,a,e[a]);return t},s=(t,e)=>f(t,p(e));import{r as D,n as H,m as W,d,R as i,D as F,F as I,B as P,I as S,o as z}from"./index.79c9d95b.js";import{R as u}from"./resize-image.3e6c988f.js";const C=t=>{const{passProps:e}=t,[a,l]=D.exports.useState(!1),c=H(),E=W(),g=d(r=>{c(t.attributes.id,s(n({},t.passProps),{width:r}))}),w=d(()=>{l(!0)}),v=d(r=>{const o=new window.Image;o.src=r.png,o.onload=()=>{c(t.attributes.id,s(n(n({},t.passProps),r),{originalWidth:o.naturalWidth,originalHeight:o.naturalHeight})),l(!1)}});return E.readOnly?i.createElement(u,{fileUrl:e.png,width:e.width,originalWidth:e.originalWidth,originalHeight:e.originalHeight,onResizeEnd:g,readOnly:!0}):i.createElement("span",s(n({},t.attributes),{"data-alioth-void":!0}),i.createElement(F,{overlay:i.createElement("div",{className:"alioth-draw-overlay"},i.createElement(I,{title:"\u7F16\u8F91"},i.createElement(P,{className:"alioth-draw-overlay-btn",onClick:w},i.createElement(S,{type:"select"}))))},i.createElement(u,{fileUrl:e.png,width:e.width,originalWidth:e.originalWidth,originalHeight:e.originalHeight,onResizeEnd:g})),i.createElement(z,s(n({visible:a,onVisibleChange:l},t.passProps),{onSave:v})))};export{C as default};
